{# ======= Shared sports helpers (SK -> icon file) ======= #}
{% macro sport_icon_file(sport_name) -%}
  {%- set key = (sport_name or '')|lower|trim -%}
  {%- set MAP = {
    'futbal': 'soccerball.svg',
    'futbal (americký)': 'american football.svg',
    'americký futbal': 'american football.svg',
    'americky futbal': 'american football.svg',
    'basketbal': 'basketball.svg',
    'volejbal': 'volleyball.svg',
    'bedminton': 'badminton.svg',
    'badminton': 'badminton.svg',
    'baseball': 'baseball.svg',
    'bejzbal': 'baseball.svg',
    'tenis': 'tennis ball.svg',
    'stolný tenis': 'table tennis.svg',
    'stolny tenis': 'table tennis.svg',
    'esport': 'esport.svg',
    'e-sport': 'esport.svg',
    'fitness': 'fitness.svg',
    'posilňovňa': 'gym.svg',
    'posilnovna': 'gym.svg',
    'gym': 'gym.svg',
    'korčuľovanie': 'ice skating.svg',
    'korculovanie': 'ice skating.svg',
    'ľadový hokej': 'ice hockey.svg',
    'ladovy hokej': 'ice hockey.svg',
    'hokej': 'ice hockey.svg',
    'pozemný hokej': 'ice hockey.svg',
    'pozemny hokej': 'ice hockey.svg',
    'box': 'boxing.svg',
    'boxovanie': 'boxing.svg',
    'plávanie': 'diving.svg',
    'plavanie': 'diving.svg',
    'potápanie': 'diving.svg',
    'potapanie': 'diving.svg',
    'beh': 'running.svg',
    'švihadlo': 'jump rope.svg',
    'svihadlo': 'jump rope.svg',
    'pickleball': 'pickleball.svg'
  } -%}
  {{ MAP.get(key, 'helmet.svg') }}
{%- endmacro %}

{# voliteľné: malá pomocná trieda na inline SVG/PNG #}
<style>
  .icon-16{width:16px;height:16px;vertical-align:-2px;display:inline-block}
</style>

<!doctype html>
<html lang="sk">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}sponpon – Marketplace{% endblock %}</title>

    <!-- Vendor CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <!-- App CSS (poradie dôležité) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles-base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">

    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
  </head>
  <body class="bg-body-tertiary">

    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg sticky-top glass-nav py-3">
      <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="{{ url_for('index') }}">
          <img src="{{ url_for('static', filename='logo.png') }}" alt="sponpon" class="brand-logo">
        </a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="mainNav">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-3">
            <li class="nav-item"><a class="nav-link active" href="#">Marketplace</a></li>
            <li class="nav-item"><a class="nav-link" href="#how">Ako to funguje</a></li>
            <li class="nav-item"><a class="nav-link" href="#faq">FAQ</a></li>
            <li class="nav-item"><a class="nav-link" href="#why">Prečo my</a></li>
          </ul>

          <form class="d-none d-lg-flex align-items-center me-lg-3 gap-2 ms-auto">
            <div class="input-group input-group-sm selector">
              <span class="input-group-text bg-transparent"><i class="bi bi-geo-alt"></i></span>
              <select id="citySelect" class="form-select border-start-0">
                {% for c in (cities or []) %}
                  <option value="{{ c }}" {% if loop.first %}selected{% endif %}>{{ c }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="input-group input-group-sm selector">
              <span class="input-group-text bg-transparent"><i class="bi bi-globe2"></i></span>
              <select id="countrySelect" class="form-select border-start-0">
                {% for c in (countries or []) %}
                  <option value="{{ c }}" {% if c == 'Slovensko' %}selected{% endif %}>{{ c }}</option>
                {% endfor %}
              </select>
            </div>
          </form>

          <div class="d-none d-lg-flex gap-2">
            <a href="#" class="btn btn-ghost rounded-pill btn-slim">Prihlásiť</a>
            <a href="#" class="btn btn-brand rounded-pill btn-slim">Zaregistrovať sa</a>
          </div>
        </div>
      </div>
    </nav>
    <div style="height:72px"></div>

    {% block content %}{% endblock %}

    <!-- FOOTER -->
    <footer class="site-footer site-footer-dark">
      <div class="container py-5">
        <div class="row g-4">
          <div class="col-12 col-lg-4">
            <a class="footer-brand d-inline-flex align-items-center gap-2 mb-3" href="{{ url_for('index') }}" aria-label="sponpon">
              <img src="{{ url_for('static', filename='logowhite.png') }}" alt="sponpon logo white" class="footer-logo">
            </a>
            <p class="text-secondary small mb-3">
              Portfóliový sponzoring pre veľké firmy. Diverzifikovaný mix klubov a športovcov
              s jasnými metrikami a jednoduchými zmluvami.
            </p>
            <div class="d-flex align-items-center gap-3">
              <span class="badge rounded-pill bg-light text-dark border">Bezpečné zmluvy</span>
              <span class="badge rounded-pill bg-light text-dark border">Reporty & atribúcia</span>
            </div>
          </div>

          <div class="col-6 col-lg-2">
            <h6 class="footer-h6">Pre firmy</h6>
            <ul class="footer-links">
              <li><a href="#how">Ako to funguje</a></li>
              <li><a href="#">Navrhnúť portfólio</a></li>
              <li><a href="#faq">FAQ</a></li>
              <li><a href="#">Cenník</a></li>
            </ul>
          </div>

          <div class="col-6 col-lg-2">
            <h6 class="footer-h6">Pre kluby & športovcov</h6>
            <ul class="footer-links">
              <li><a href="#">Vytvoriť profil</a></li>
              <li><a href="#">Pokyny k balíčkom</a></li>
              <li><a href="#">Overenie profilu</a></li>
              <li><a href="#">Podpora</a></li>
            </ul>
          </div>

          <div class="col-12 col-lg-4">
            <h6 class="footer-h6">Novinky do e-mailu</h6>
            <p class="text-secondary small">Raz za čas pošleme príklady portfólií a case studies.</p>
            <form class="footer-form" onsubmit="event.preventDefault();">
              <div class="input-group input-group-lg">
                <input type="email" class="form-control footer-input" placeholder="tvoj@email.com" aria-label="Email">
                <button class="btn btn-brand">Odoberať</button>
              </div>
              <small class="text-secondary d-block mt-2">Odoslaním súhlasíš s <a href="#" class="link-underline">GDPR</a>.</small>
            </form>
          </div>
        </div>
      </div>

      <div class="footer-bottom">
        <div class="container d-flex flex-column flex-md-row align-items-center justify-content-between gap-3">
          <div class="text-secondary small">© {{ year }} sponpon. Všetky práva vyhradené.</div>
          <ul class="list-inline small mb-0">
            <li class="list-inline-item"><a href="#" class="footer-bottom-link">GDPR</a></li>
            <li class="list-inline-item"><a href="#" class="footer-bottom-link">Podmienky</a></li>
            <li class="list-inline-item"><a href="#" class="footer-bottom-link">Kontakt</a></li>
          </ul>
        </div>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script>
      const citySel = document.getElementById('citySelect');
      const countrySel = document.getElementById('countrySelect');
      if (citySel && countrySel){
        citySel.value = localStorage.getItem('selectedCity') || citySel.value;
        countrySel.value = localStorage.getItem('selectedCountry') || countrySel.value;
        citySel.addEventListener('change', () => localStorage.setItem('selectedCity', citySel.value));
        countrySel.addEventListener('change', () => localStorage.setItem('selectedCountry', countrySel.value));
      }
    </script>
  </body>
</html>
